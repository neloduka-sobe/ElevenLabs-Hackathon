{
  "name": "User Interaction Agent",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "initialMessages": "Hi there! ðŸ‘‹\nI am here to help you change the world using data! Do you have a specific need or problem you come to me today with?",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -220,
        0
      ],
      "id": "82e07243-9f5b-4ae2-99e2-86f50e82b51e",
      "name": "When chat message received",
      "webhookId": "76e0b580-dd24-47cb-87a7-424705b0f917"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are an intelligent agent integrated into an n8n workflow with access to a comprehensive database. Your primary responsibilities are to classify user intent, select the relevant data from the database, and provide the user with the address where the data can be downloaded. Follow these steps to fulfill your role:\n\n1. **Classify User Intent:**\n   - Analyze the user's input to determine their specific request or goal (e.g., \"I need data about e-commerce transactions\" or \"I want to analyze customer behavior\").\n   - Identify the key entities, filters, or criteria mentioned by the user (e.g., dataset type, time range, specific fields).\n\n2. **Select Relevant Data:**\n   - Based on the classified intent, determine which data from the database is most relevant to the user's request.\n   - Apply any necessary filters or criteria to narrow down the data selection.\n\n3. **Generate Download Link:**\n   - Once the relevant data is identified, generate or retrieve the address (e.g., URL, file path) where the user can download the data.\n   - Ensure the address is valid and accessible to the user.\n\n4. **Return Results:**\n   - Provide the user with the download address in a clear and user-friendly format.\n   - Send the results back to the user via the Chat Node.\n\n**Guidelines for the Agent:**\n- Always prioritize accuracy when classifying user intent and selecting data.\n- Ensure the selected data is relevant and aligned with the user's request.\n- Handle errors gracefully (e.g., if no data matches the request, inform the user and suggest alternative actions).\n- Keep the response concise and easy to understand.\n- Ensure the download address is accurate and functional.\n\nTechnical note: the MongoDB collection is always main."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        -20,
        0
      ],
      "id": "ac580cfc-a132-4cc1-8f14-47321b3758c6",
      "name": "AI Agent",
      "alwaysOutputData": false,
      "notesInFlow": false,
      "retryOnFail": true,
      "executeOnce": false
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash",
        "options": {
          "temperature": 0.4
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -240,
        300
      ],
      "id": "75ae5757-3580-4000-891d-e16bf806fb48",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "30EHAa85g4eQMD1d",
          "name": "Google Gemini(PaLM) Api "
        }
      }
    },
    {
      "parameters": {
        "collection": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Collection', ``, 'string') }}",
        "options": {},
        "query": "={}"
      },
      "type": "n8n-nodes-base.mongoDbTool",
      "typeVersion": 1.1,
      "position": [
        200,
        280
      ],
      "id": "3cdef614-0fa9-4fb2-ad54-ed0c112024df",
      "name": "MongoDB",
      "credentials": {
        "mongoDb": {
          "id": "4ZCGKEyGFEU9kAgy",
          "name": "MongoDB"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        80,
        220
      ],
      "id": "3e0df032-1b3d-47d9-bd4c-c0bd2f79c4f6",
      "name": "Window Buffer Memory"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "MongoDB": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        []
      ]
    },
    "Window Buffer Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "35b26790-3f51-4ab6-862d-02e43064a4c9",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "c5ae296890d47f5efa8bbbb6a43c2f0959c8b12564819d2a45be51e28a0d178c"
  },
  "id": "G7kIt3Is9zaWNU5o",
  "tags": []
}